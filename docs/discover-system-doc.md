# BuildWhat 发现系统设计文档

## 一、项目背景与核心洞察

### 1.1 当前状态

BuildWhat 已具备三种稀缺资产：
1. **真实可盈利 SaaS 数据**（Stripe + MRR）
2. **真实创作者与产品的强关联**
3. **AI Agent + 分析 + 陪伴能力**

但当前页面结构（产品/创作者/Ask AI/赛道）在用户心智中被翻译为"数据平台 + 聊天机器人"，而非真正的价值：

> **「帮你看懂：谁在赚到钱、他们在做什么、你能不能抄、怎么抄、抄哪条路成功率更高」**

### 1.2 核心问题

- **"看懂"是认知体验，不是表格体验**
- 用户真正的第一需求不是"找产品/看榜单"，而是**被点燃、被启发、产生"我好像能做点什么"的感觉**
- Ask AI 是最强能力，却被放成了一个"工具选项"

### 1.3 正确的关系链路

```
发现 / 灵感 / 叙事 → Ask AI → 决策 → 行动
```

---

## 二、发现系统的本质定义

### 2.1 发现页不是什么

- ❌ 不是榜单页
- ❌ 不是数据展示
- ❌ 不是"我告诉你哪个好"

### 2.2 发现页是什么

> **「AI 生成的 SaaS / 创作者策展空间」**

核心三件事：
1. **不是"展示数据"，而是"给数据命名"**
2. **不是"排序"，而是"叙事 + 主题"**
3. **不是"我告诉你哪个好"，而是"帮你发现你可能会感兴趣的世界"**

### 2.3 发现页的唯一目标

> **让用户忍不住点进 Ask AI**

不是让用户看完、记住排名、收藏产品，而是产生：
> "这个专题太对我了，我想问更多"

---

## 三、三层分析架构

### 3.1 架构总览

```
Landing Page 原始分析（已有）
        ↓
第一层：事实标签层（客观提取）
        ↓
第二层：判断母题层（AI 推断）
        ↓
第三层：策展生成层（专题/合集/命名）
```

### 3.2 第一层：事实标签层

**定义**：AI 从 Landing Page 直接可抽取的客观事实，不含观点。

**已有字段**（来自 `LandingPageAnalysis`）：

| 类别 | 字段 |
|------|------|
| 产品 | headline_text, tagline_text, core_features, feature_count |
| 价值 | value_propositions, target_audience, pain_points |
| 定价 | pricing_model, pricing_tiers, has_free_tier, has_trial |
| 转化 | cta_count, cta_texts, conversion_funnel_steps, has_instant_value_demo |
| 评分 | conversion_friendliness_score, positioning_clarity_score |
| 复制 | replication_difficulty_score, individual_replicability_score, potential_moats |
| 叙事 | uses_before_after, uses_emotional_words |

**补充字段建议**：

```python
{
    "pricing_type": "subscription / one-time / freemium / usage",
    "price_range": "low / mid / high",  # 基于 pricing_tiers 推断
    "target_user_type": "developer / creator / SMB / enterprise / consumer",
    "cta_type": "demo / signup / waitlist / contact / buy",
    "feature_scope": "single / narrow / broad",  # 功能边界
    "value_proposition_style": "效率 / 赚钱 / 安全 / 自动化 / 创意",
}
```

### 3.3 第二层：判断母题层

**定义**：不是从页面直接读出，而是 AI 基于多个字段推断的判断。

**核心原则**：
- 母题 = 行业内反复出现、可复用的"判断问题模板"
- 母题不是答案，而是"制造值得被策展的张力"
- 母题必须：减少选择空间、指向行动判断、可被多次复用、不依赖收入数据

**当前母题库（8 个）**：

| 母题 Key | 名称 | 判断选项 | 判断规则 |
|----------|------|----------|----------|
| fake_opportunity | 是否为伪机会 | 是/存在风险/不是/证据不足 | 需求抽象/价值主张泛化/场景不清晰/CTA无法指向实际使用 |
| demand_clarity | 需求清晰度 | 显性/半显性/隐性/证据不足 | 标题/功能/CTA是否指向具体场景 |
| indie_friendly | 独立开发者可行性 | 非常适合/有挑战但可行/不适合/证据不足 | 技术复杂度/功能边界/依赖程度/MVP可行性 |
| imitability | 可模仿性判断 | 高/中等/低/证据不足 | 网络效应/专有数据/复杂生态/强品牌依赖 |
| valuation_bias | 价值高估/低估 | 被高估/相对合理/被低估/证据不足 | 需同时引用定价透明度证据和功能证明证据 |
| failure_mode | 失败风险类型 | 技术实现/市场需求/用户获取/信任品牌/定价变现/证据不足 | 选择最主要风险类型 |
| practice_project_fit | 练手项目适配度 | 非常适合/适合但有坑/不适合/证据不足 | 学习收益 vs 成功概率，复杂度/闭环/交付结果 |
| narrative_credibility | 叙事可信度 | 可信度高/一般/存疑/证据不足 | 判"可信度高"必须有演示/试用/具体功能列表证据 |

**母题层级模型（可扩展）**：

| 层级 | 名称 | 示例母题 |
|------|------|----------|
| 第1层 | 结构层（已有） | 可模仿性、技术复杂度、独立开发者友好度 |
| 第2层 | 认知偏差层 | 人们为什么会高估这个机会？为什么很多人会选错？ |
| 第3层 | 路径层 | 从0到1哪一步最难？哪个阶段最容易放弃？ |
| 第4层 | 时机层 | 这个方向是变容易了还是更难了？哪些变化正在让它失效？ |
| 第5层 | 替代与变体层 | 如果不用AI还能怎么做？如果只做10%功能会怎样？ |

### 3.4 第三层：策展生成层

**定义**：基于多个产品的判断母题结果，生成专题/合集/命名。

**输入**：多个产品的判断标签集合
**输出**：专题、合集、标题

---

## 四、多角色策展系统

### 4.1 核心理解

> **不是让 AI 模拟人，而是让 AI 用不同"判断偏好"去过滤同一批分析结果**

- 不是聊天
- 不是人格扮演
- 是**结构化偏见系统**

### 4.2 角色只出现在策展阶段

```
判断母题 Agent（单产品分析）
        ↓
【生成：判断标签 + 判断理由】
        ↓
多角色策展 Agent（跨产品筛选）
        ↓
【生成：专题 / 合集 / 命名】
```

### 4.3 策展角色定义

#### 角色 1：谨慎的独立开发者

```python
{
    "name": "cautious_indie_dev",
    "display_name": "谨慎的独立开发者",
    "filter_rules": {
        "indie_friendly": ["非常适合", "有挑战但可行"],
        "fake_opportunity": ["不是伪机会"],
        "failure_mode": {"exclude": ["技术实现风险"]},
    },
    "topic_templates": [
        "失败成本最低的 SaaS 方向",
        "一个人也能维护的产品",
        "不需要融资也能活的方向",
    ],
}
```

#### 角色 2：机会嗅觉型创业者

```python
{
    "name": "opportunity_hunter",
    "display_name": "机会嗅觉型创业者",
    "filter_rules": {
        "valuation_bias": ["被低估"],
        "demand_clarity": ["显性"],
        "imitability": ["高可模仿性", "中等可模仿性"],
    },
    "topic_templates": [
        "被低估但值得认真研究的方向",
        "别人不看好但数据说话的产品",
        "现在入场还不晚的机会",
    ],
}
```

#### 角色 3：反泡沫角色（建立信任）

```python
{
    "name": "anti_bubble",
    "display_name": "反泡沫角色",
    "filter_rules": {
        "valuation_bias": ["被高估"],
        "narrative_credibility": ["可信度存疑", "可信度一般"],
    },
    "topic_templates": [
        "看起来性感但风险很高的产品",
        "营销比产品强的案例",
        "不是 AI 但活得很好的产品",
    ],
}
```

---

## 五、专题生成套路

### 5.1 套路一：反差型（最好用）

**原理**：用两个"本不该同时出现的判断维度"做交集

**示例组合**：
- 低技术复杂度 + 高定价
- 定位模糊 + CTA 很直接
- 功能很少 + 定价页很长
- 不是 AI + landing page 全是 AI 话术

**标题模板**：
> 「这些产品{A}，但{B}」

**示例**：
> 「这些产品技术不复杂，但卖得一点也不便宜」

### 5.2 套路二：Niche 聚焦型

**原理**：在一个小用户群体中再切一刀

**示例组合**：
- target_user = developer + pricing_type = subscription + demand_clarity = 显性

**标题模板**：
> 「专门赚{用户群}钱的"小而美"产品」

### 5.3 套路三：认知纠偏型（建立信任）

**原理**：明确告诉用户：你以为的和现实不一样

**示例组合**：
- narrative_style = 卖未来 + feature_scope = 很窄 + failure_mode = 增长风险

**标题模板**：
> 「这些产品不是没需求，而是{真实问题}」

### 5.4 套路四：行动导向型（强转化）

**原理**：明确回答"你现在能不能做"

**示例组合**：
- imitability = 高 + indie_friendly = 非常适合 + demand_clarity = 显性

**标题模板**：
> 「如果你现在想做 SaaS，可以从这些方向开始」

---

## 六、冲突类型（驱动专题生成）

专题的本质是"冲突"，以下是可系统化的冲突类型：

| 冲突类型 | 描述 | 示例 |
|----------|------|------|
| 表象 vs 本质 | 看起来 X，实际上 Y | 看起来很简单，实际上很难增长 |
| 预期 vs 现实 | 你以为这样能成功，但现实不是 | 你以为需要 AI，但不需要 |
| 优点 vs 代价 | 这个好处背后藏着什么坑 | 低门槛意味着高竞争 |
| 可行性 vs 可持续性 | 能做出来，但能不能活下去 | 能复制，但能不能赚钱 |
| 局部最优 vs 全局失败 | 单点做对了，但整体错了 | 产品好，但获客难 |

---

## 七、发现页模块设计

### 7.1 整体结构

```
发现 Discover
├─ 今日 AI 策展（每日 1-2 个，灵魂模块）
├─ 主题合集（横向滑动，差异化核心）
├─ 爆款解剖（把"抄"说清楚）
├─ 创作者宇宙（人的维度）
└─ 你可能想抄的（强转化区，个性化推荐）
```

### 7.2 模块一：今日 AI 策展

**定位**：灵魂模块，每日只推 1-2 个

**标题示例**：
- 「3 个独立开发者，靠一个很无聊的需求赚到了钱」
- 「这些 SaaS 没有官网设计感，但 MRR 都超过 $10k」
- 「不是 AI，但活得很好的产品」

**页面结构**：
1. AI 写一段"为什么这批东西值得看"
2. 展示 3-5 个产品/创作者
3. 每个卡片只展示：一句话标签（AI 生成）+ 一个"反直觉点"
4. 底部强 CTA：👉 **"让我帮你分析：你能不能做类似的"**

### 7.3 模块二：主题合集

**产品向标签示例**：
- 「被低估的赚钱机器」
- 「一个人也能维护的 SaaS」
- 「看起来很小，但复购很高」
- 「没有融资，但活得很好」
- 「被大厂忽视的角落需求」

**创作者向标签示例**：
- 「不爱写推特，但很会赚钱的人」
- 「产品比人火的创作者」
- 「一年只发布 2 个产品的人」
- 「靠教程起家，靠 SaaS 变现」

**点击后结构**：
1. AI 解释：这个主题为什么存在
2. 列出 5-10 个对象
3. 每个对象附一个 AI 生成的"命名标签"

### 7.4 模块三：爆款解剖

**示例标题**：
- 「这个 $20k MRR 产品，第一版其实很烂」
- 「这个 SaaS 的成功，80% 不在技术」

**页面结构**：
1. 产品时间线（AI 推断）
2. 核心需求拆解
3. 抄袭风险 & 可行变体
4. CTA："如果你要做，我可以帮你一起拆"

### 7.5 模块四：你可能想抄的

**基于用户行为生成**：
- 浏览行为
- 问过的问题
- 点击过的主题

**每个卡片包含**：
> "为什么**你**可能适合做这个"

---

## 八、工程实现架构

### 8.1 Agent 拆分

```
1. Landing Page 解析 Agent（已有）
   - 输入：网页 HTML
   - 输出：结构化字段（第一层）

2. 判断母题 Agent（mother_theme_test.py）
   - 输入：第一层字段 + 母题模板
   - 输出：每个产品的判断标签 + 理由

3. 策展 Agent（待实现）
   - 输入：多个产品的判断标签 + 角色定义 + 专题套路
   - 输出：专题/合集/标题
```

### 8.2 数据流

```
┌─────────────────────────────────────────────────────────────┐
│                    Landing Page HTML                        │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│              Landing Page 解析 Agent                        │
│  输出：headline, features, pricing, cta, scores...          │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│              判断母题 Agent（单产品）                         │
│  输入：第一层字段 + 8个母题模板                               │
│  输出：{                                                    │
│    "fake_opportunity": "不是伪机会",                         │
│    "demand_clarity": "显性",                                │
│    "indie_friendly": "非常适合",                            │
│    ...                                                      │
│  }                                                          │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│              策展 Agent（跨产品）                            │
│  输入：N个产品的判断结果 + 角色 + 套路                        │
│  输出：{                                                    │
│    "topic_title": "失败成本最低的 SaaS 方向",                │
│    "topic_description": "...",                              │
│    "products": [...],                                       │
│    "cta": "让我帮你分析：你能不能做类似的"                    │
│  }                                                          │
└─────────────────────────────────────────────────────────────┘
```

### 8.3 数据库设计（新增表）

```sql
-- 母题判断结果表
CREATE TABLE mother_theme_judgments (
    id INTEGER PRIMARY KEY,
    startup_id INTEGER NOT NULL,
    theme_key VARCHAR(50) NOT NULL,  -- fake_opportunity, demand_clarity, etc.
    judgment VARCHAR(100),           -- 判断结论
    confidence VARCHAR(10),          -- 高/中/低
    reasons JSON,                    -- 判断理由
    evidence_fields JSON,            -- 引用的证据字段
    uncertainties JSON,              -- 不确定性
    prompt_version VARCHAR(20),
    model VARCHAR(50),
    created_at TIMESTAMP,
    FOREIGN KEY (startup_id) REFERENCES startups(id)
);

-- 专题表
CREATE TABLE discover_topics (
    id INTEGER PRIMARY KEY,
    topic_key VARCHAR(100) UNIQUE,   -- 专题唯一标识
    title VARCHAR(200),              -- 专题标题
    description TEXT,                -- AI 生成的描述
    curator_role VARCHAR(50),        -- 策展角色
    generation_pattern VARCHAR(50),  -- 生成套路（contrast/niche/cognitive/action）
    filter_rules JSON,               -- 筛选规则
    product_ids JSON,                -- 包含的产品 ID 列表
    cta_text VARCHAR(200),           -- 行动号召文案
    is_active BOOLEAN DEFAULT TRUE,
    display_order INTEGER,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);

-- 专题-产品关联表（含 AI 生成的标签）
CREATE TABLE topic_products (
    id INTEGER PRIMARY KEY,
    topic_id INTEGER NOT NULL,
    startup_id INTEGER NOT NULL,
    ai_label VARCHAR(200),           -- AI 为该产品在此专题下生成的标签
    counter_intuitive_point TEXT,    -- 反直觉点
    display_order INTEGER,
    FOREIGN KEY (topic_id) REFERENCES discover_topics(id),
    FOREIGN KEY (startup_id) REFERENCES startups(id)
);
```

---

## 九、母题生成器（可扩展性保障）

### 9.1 母题生成公式

> **母题 = A 视角 × B 约束 × C 冲突**

### 9.2 A 类：视角（Perspective）

- 初次做 SaaS 的人
- 连续创业者
- 没时间的人（副业）
- 不擅长增长的人
- 技术强 / 市场弱的人
- 讨厌社交媒体的人
- 想做全职的人

### 9.3 B 类：约束（Constraint）

- 时间（只能业余）
- 精力（不能 24h 维护）
- 资金（0 成本 / 低成本）
- 技能（只会前端 / 只会后端）
- 心理（怕失败 / 怕社交）

### 9.4 C 类：冲突（Tension）

- 表象 vs 本质
- 预期 vs 现实
- 优点 vs 代价
- 可行性 vs 可持续性
- 局部最优 vs 全局失败

### 9.5 母题生成器 Prompt

```text
你是一个"产品判断框架设计师"，
你的任务不是分析具体产品，
而是设计【帮助开发者判断机会的母题问题模板】。

你将基于以下输入：
1. 一批已经完成结构化判断的 SaaS 产品样本
2. 当前已有的判断母题列表
3. 产品目标：帮助技术背景的开发者判断哪些 SaaS 方向值得投入精力

请你生成【新的判断母题】，要求：
- 不是具体结论，而是"判断问题"
- 能在多个产品上反复使用
- 能帮助用户减少盲目探索
- 不依赖收入、融资等外部数据
- 避免纯噱头或情绪化母题

对于每一个母题，请输出以下字段：
1. 母题名称（简洁、可被记住）
2. 核心判断问题（一个明确的问题）
3. 为什么这个母题重要（它解决什么决策困扰）
4. 适用条件（什么情况下使用这个母题）
5. 可能带来的用户价值
6. 误用风险（什么时候这个母题会误导判断）

请一次生成 5 个母题。
```

---

## 十、实施路线图

### Phase 1：母题判断验证（当前）

**目标**：验证 8 个母题在真实数据上的表现

**任务**：
- [x] 完成 `mother_theme_test.py` 基础框架
- [x] 定义 8 个母题模板和判断规则
- [x] 实现 one-shot 批量判断
- [ ] 跑 50-100 个产品，观察判断分布
- [ ] 分析判断一致性和证据充分性
- [ ] 调优 Prompt 和验证规则

**产出**：
- 母题判断结果 JSON
- 各母题分布统计
- Prompt 调优记录

### Phase 2：策展 Agent 开发

**目标**：实现跨产品的专题生成

**任务**：
- [ ] 设计策展角色配置结构
- [ ] 实现专题生成套路（4 种）
- [ ] 开发策展 Agent
- [ ] 生成第一批专题（10-20 个）

**产出**：
- `curator_agent.py`
- 专题数据库表
- 第一批专题内容

### Phase 3：发现页 MVP

**目标**：上线最小可用的发现页

**任务**：
- [ ] 前端发现页 UI
- [ ] 今日 AI 策展模块
- [ ] 主题合集模块
- [ ] 专题详情页 + Ask AI 入口

**产出**：
- 发现页前端
- 专题 → Ask AI 转化链路

### Phase 4：母题演化系统

**目标**：让母题库可以自我进化

**任务**：
- [ ] 实现母题生成器 Agent
- [ ] 建立母题评估机制（用户行为反馈）
- [ ] 母题版本管理

**产出**：
- 母题生成器
- 母题淘汰/新增机制

---

## 十一、关键成功指标

### 11.1 母题判断质量

- 判断一致性：同一产品多次判断结果一致率 > 90%
- 证据充分性："证据不足"判断占比 < 20%
- 判断分布：每个母题的判断选项分布合理，无极端偏斜

### 11.2 专题生成质量

- 专题覆盖率：> 80% 的产品至少出现在 1 个专题中
- 专题差异性：不同专题的产品重叠率 < 30%
- 标题吸引力：人工评估标题"想点进去"的比例 > 60%

### 11.3 用户转化

- 发现页 → 专题详情页 点击率
- 专题详情页 → Ask AI 转化率
- Ask AI 对话深度（轮次）

---

## 十二、核心理念总结

### 12.1 发现系统的本质

> **发现 = AI 自动生成「可以当标题的判断句」**

### 12.2 母题的本质

> **母题 = 行业内反复出现、可复用的"判断问题模板"**
> **母题不是答案，而是"制造值得被策展的张力"**

### 12.3 多角色策展的本质

> **不同角色 = 不同"筛选器"**
> **角色不"分析产品"，角色只"组合判断"**

### 12.4 专业性的来源

> **专业性不来自你的经验，而来自"判断为什么成立"的透明度**

只要做到：有判断、有理由、有不确定性说明，BuildWhat 就是一个"可信但不权威"的认知产品。

### 12.5 可扩展性的保障

> **母题库不是靠"你想到多少"，而是靠"世界变化会不断制造新冲突"**

母题生成器的真实驱动因子：
1. 数据规模变化 → 新模式出现
2. 世界变化 → 新失效方式出现
3. 用户约束变化 → 新视角出现
4. 现有母题之间的冲突 → 新母题产生
